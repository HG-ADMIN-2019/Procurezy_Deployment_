<!--Display details of a Document-->

{% extends 'root/base.html' %}
{% load static %}
{% block title %} Details of the Document {% endblock %}

{% block maincontent %}
<style>
    .table td {
        padding: 1.5rem;
        vertical-align: top;
        border-top: 1px solid #dee2e6;
    }
</style>
{% if type == 'SC' %}
<div class="container-fluid">
    <div id="button" class="mo-doc-button-container">
        <!--Display header based on document type-->
        {% for header_data in header_details %}
        {% if type == 'SC' %}
        <h3>&nbsp;&nbsp;Shopping Cart #{{ header_data.doc_number }}</h3>
        {% endif %}
        {% endfor %}
        <div class="d-flex">
            <div id="on_page_load">
                {% if hdr_det.status == 'SAVED' %}
                <div class="mo-doc-button-group__saved">
                    <button type="button" class="btn btn-outline-primary" onclick="window.close()"><i class="fas fa-times"></i> Close</button>
                </div>
                {% else %}
                <div class="mo-doc-button-group__saved" >
                    <button type="button" class="btn btn-outline-primary" onclick="window.close()"><i class="fas fa-times"></i> Close</button>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="mo-doc-body-wrapper">

        <!--Display Header Details-->
        <div class="mo-doc-header">
            <div class="card card-shadow-1">
                <div class="card-body mo-doc-header__doc-details" id="header_div">
                    <div class="header-details">
                        <div style="font-weight:normal;" hidden>Header Details&nbsp;&nbsp;</div>
                    </div>
                    <div>
                        <div>
                            <table class="table-sm" style="margin:0px 10px 0px 10px; width:98%;">
                                <thead style="color:#00000080; font-size:16px; font-style:normal; font-weight: 600;">
                                <tr>
                                    <th scope="col">Document Name</th>
                                    {% if type == 'SC' %}
                                    <th scope="col">Document Number</th>
                                    {% elif type == 'PO' %}
                                    <th scope="col">PO Number</th>
                                    {% else %}
                                    <th scope="col">Confirmation Number</th>
                                    <th scope="col">PO Number</th>
                                    {% endif %}
                                    <th scope="col">Created On</th>
                                    <th scope="col">Created By</th>
                                    <th scope="col">Status</th>
                                </tr>
                                </thead>
                                <tbody style="font-style: normal; font-weight: 600; font-size: 18px;">
                                {% for header_data in header_details %}
                                <tr>
                                    <td>{{header_data.description}}</td>
                                    <td>{{ header_data.doc_number }}</td>
                                    {% if type == 'CONF' %}
                                    <td><a href="{% url 'eProc_Archiving:document_info' 'PO' header_data.po_doc_number %}" target="_blank">{{ header_data.po_doc_number }}</a></td>
                                    {% endif %}
                                    <td>{{header_data.created_at}}</td>
                                    <td>{{header_data.created_by}}</td>
                                    <td><span class="badge badge-pill badge_status_approved">{{header_data.status}}</span></td>
                                </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="mb-4">
            <div class="row no-gutters">
                <div class="col-lg mr-2 ml-2">
                    <div class="card card-shadow-1" style="height:100%;">
                         <div class="card-body">
                             <h5 class="card-title">Shipping Address</h5>
                             <div class="elements-space-between">
                                 <div></div>
                             </div>
                             <br><br><br>
                             <hr>
                             {% for header_data in header_details %}
                             <div class="elements-space-between">
                                 <span class="h6">Receiver : <span style="color:#00000080;">{{header_data.requester}} </span></span>
                             </div>
                             {% endfor %}
                         </div>
                    </div>
                </div>
                <div class="col-lg mr-2 ml-2">
                    <div class="card account-assignment-card card-shadow-1" style="height:100%;">
                        <div class="card-body">
                            <h5 class="card-title">Account Assignment</h5>
                            <div class="elements-space-between">
                                 {% if accounting_details %}
                                    {% with accounting_details.0 as prev_detail %}
                                        {% with accounting_details.0 as accounting_data %}
                                            <div class="mb-2">
                                                {% if prev_detail.acc_cat %}
                                                    <div>
                                                        <span class="h6"> Account Assignment Category : </span>
                                                        {% if accounting_details|length > 1 and prev_detail.acc_cat != accounting_details.1.acc_cat %}
                                                             <span style="color:#212529;">Multiple</span>
                                                        {% else %}
                                                            <span style="color:#212529;">{{ accounting_data.acc_cat }}</span>
                                                            <span class="badge badge-pill badge_primary_acc">Primary</span>
                                                        {% endif %}
                                                    </div>
                                                {% endif %}
                                                {% if prev_detail.dist_perc %}
                                                                <div>
                                                                    <span class="h6"> Distribution Percentage : </span>
                                                                    {% if accounting_details|length > 1 and prev_detail.dist_perc != accounting_details.1.dist_perc %}
                                                                          <span style="color:#212529;">Multiple</span>
                                                                    {% else %}
                                                                         <span style="color:#212529;">{{ accounting_data.dist_perc }}</span>
                                                                    {% endif %}
                                                                </div>
                                                {% endif %}
                                                {% if prev_detail.cost_center %}
                                                                <div>
                                                                    <span class="h6"> Cost Center : </span>
                                                                    {% if accounting_details|length > 1 and prev_detail.cost_center != accounting_details.1.cost_center %}
                                                                         <span style="color:#212529;">Multiple</span>
                                                                    {% else %}
                                                                         <span style="color:#212529;">{{ accounting_data.cost_center }}</span>
                                                                    {% endif %}
                                                                </div>
                                                {% endif %}
                                                {% if prev_detail.generic_acc_ass %}
                                                                <div>
                                                                    <span class="h6"> Generic Account Assignment : </span>
                                                                    {% if accounting_details|length > 1 and prev_detail.generic_acc_ass != accounting_details.1.generic_acc_ass %}
                                                                         <span style="color:#212529;">Multiple</span>
                                                                    {% else %}
                                                                         <span style="color:#212529;">{{ accounting_data.generic_acc_ass }}</span>
                                                                    {% endif %}
                                                                </div>
                                                {% endif %}
                                                {% if prev_detail.internal_order %}
                                                                <div>
                                                                    <span class="h6"> Internal Order : </span>
                                                                    {% if accounting_details|length > 1 and prev_detail.internal_order != accounting_details.1.internal_order %}
                                                                        <span style="color:#212529;">Multiple</span>
                                                                    {% else %}
                                                                        <span style="color:#212529;">{{ accounting_data.internal_order }}</span>
                                                                    {% endif %}
                                                                </div>
                                                {% endif %}
                                                {% if prev_detail.wbs_ele %}
                                                                <div>
                                                                    <span class="h6"> WBS Element : </span>
                                                                    {% if accounting_details|length > 1 and prev_detail.wbs_ele != accounting_details.1.wbs_ele %}
                                                                        <span style="color:#212529;">Multiple</span>
                                                                    {% else %}
                                                                        <span style="color:#212529;">{{ accounting_data.wbs_ele }}</span>
                                                                    {% endif %}
                                                                </div>
                                                {% endif %}
                                                {% if prev_detail.gl_acc_num %}
                                                                <div>
                                                                    <span class="h6"> General Ledger Account : </span>
                                                                    {% if accounting_details|length > 1 and prev_detail.gl_acc_num != accounting_details.1.gl_acc_num %}
                                                                      <span style="color:#212529;"> Multiple </span>
                                                                    {% else %}
                                                                       <span style="color:#212529;">{{ accounting_data.gl_acc_num }}</span>
                                                                    {% endif %}
                                                                </div>
                                                {% endif %}
                                            </div>
                                        {% endwith %}
                                    {% endwith %}
                                {% else %}
                                    <p>No accounting details available.</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--Display Item details-->
        <div class="card mb-4 mr-2 ml-2 card-shadow-1">
            <div class="card-body elements-space-between"><h4>Cart Overview</h4></div>
            <div>
                <div class="mo-items-table">
                    <div class="table-responsive-lg">
                        <div>
                            <table id="cart_details" class="table mo-item-table">
                                <thead class="thead-light">
                                <tr>
                                    <th scope="col">No</th>
                                    <th scope="col">Description</th>
                                    <th scope="col">Delivery Date</th>
                                    <th scope="col">Price Unit</th>
                                    <th scope="col">Unit</th>
                                    <th scope="col">Quantity</th>
                                    {% if type == 'PO' %}
                                        <th scope="col">SC Number</th>
                                    {% elif type == 'SC' %}
                                        <th scope="col">PO  Number</th>
                                    {% endif %}
                                    <th scope="col">Action</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for item_data in item_details %}
                                <tr>
                                    <td>{{forloop.counter}}</td>
                                    <td>{{item_data.prod_description}}</td>
                                    <td>{{item_data.item_del_date}}</td>
                                    <td>{{item_data.price_unit}}</td>
                                    <td>{{item_data.unit}}</td>
                                    <td>{{item_data.quantity}}</td>
                                    {% if type == 'PO' %}
                                    <td><a href="{% url 'eProc_Archiving:document_info' 'SC' item_data.sc_num %}" target="_blank" style="color: blue;">{{item_data.sc_num}}</a></td>
                                    {% elif type == 'SC' %}
                                    <td><a href="{% url 'eProc_Archiving:document_info' 'PO' item_data.po_num %}" target="_blank" style="color: blue;">{{item_data.po_num}}</a></td>
                                    {% endif %}
                                    <td>
                                        <div class="item-action-icon-section">
                                            <div class="action_dropdown dropdown">
                                                <a type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                    <i class="material-icons action_dropdown-icon item-action-icons">more_vert</i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton" style="color:#00000080;">
                                                    <a class="dropdown-item detailingData-{{ forloop.counter }}" onclick="showSection(this, 'detailingData-{{ forloop.counter }}')">Details</a>
                                                    <a class="dropdown-item accoutingData-{{ forloop.counter }}" onclick="showSection(this, 'accoutingData-{{ forloop.counter }}')">Cost Assignment</a>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                <!--start of hideable section containing sc item action-->
                                <tr class="item-table-action__section">
                                    <td colspan="14" id="item_info_tr-{{forloop.counter}}" hidden>
                                        <!--Detailing Section-->
                                        <div id="detailingData-{{ forloop.counter }}" style="display: none;" class="item{{ forloop.counter }}">
                                            <div class="card">
                                                <div class="card-header item-table-action__header"><span> Details </span>
                                                    <span onclick="closeAttachSection(this, 'detailingData-{{ forloop.counter }}')">
                                                    <i class="fas fa-times"></i>
                                                    </span>
                                                </div>
                                                <div class="card-body">
                                                    <div class="hg_class_item_data">
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="form-group row">
                                                                    <label class="col-4 col-form-label">Item Number: </label>
                                                                    <div class="col-8">
                                                                        <input type="text" class="form-control" value="{{item_data.item_num}}" style="background-color: #e9ecef;">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-4 col-form-label">Company Code: </label>
                                                                    <div class="col-8">
                                                                        <input type="text" class="form-control" value="{{item_data.comp_code}}" style="background-color: #e9ecef;">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-4 col-form-label">Purchasing Group: </label>
                                                                    <div class="col-8">
                                                                        <input type="text" class="form-control" value="{{item_data.purch_grp}}" style="background-color: #e9ecef;">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-4 col-form-label">Supplier ID: </label>
                                                                    <div class="col-8">
                                                                        <input type="text" class="form-control" value="{{item_data.supplier_id}}" style="background-color: #e9ecef;">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-4 col-form-label">Product Category: </label>
                                                                    <div class="col-8">
                                                                        <input type="text" class="form-control" value="{{item_data.prod_cat}}" style="background-color: #e9ecef;">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-4 col-form-label">Catalog ID: </label>
                                                                    <div class="col-8">
                                                                        <input type="text" class="form-control" value="{{item_data.catalog_id}}" style="background-color: #e9ecef;">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col">
                                                                <div class="form-group row">
                                                                    <label class="col-4 col-form-label">UNSPSC: </label>
                                                                    <div class="col-8">
                                                                        <input type="text" class="form-control" value="{{item_data.unspsc}}" style="background-color: #e9ecef;">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-4 col-form-label">Price: </label>
                                                                    <div class="col-8">
                                                                        <input type="text" class="form-control" value="{{item_data.price}}" style="background-color: #e9ecef;">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-4 col-form-label">Gross Price: </label>
                                                                    <div class="col-8">
                                                                        <input type="text" class="form-control" value="{{item_data.gross_price}}" style="background-color: #e9ecef;">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-4 col-form-label">Supplier Product Number: </label>
                                                                    <div class="col-8">
                                                                        <input type="text" class="form-control" value="{{item_data.supp_prod_num}}" style="background-color: #e9ecef;">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-4 col-form-label">Status: </label>
                                                                    <div class="col-8">
                                                                        <input type="text" class="form-control" value="{{item_data.status}}" style="background-color: #e9ecef;">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-4 col-form-label">Goods Recipient: </label>
                                                                    <div class="col-8">
                                                                        <input type="text" class="form-control" value="{{item_data.goods_recep}}" style="background-color: #e9ecef;">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- end of hideable content which lets the user change Detail Section -->
                                        <!-- start of hideable content which lets the user change cost assignment -->
                                        <div id="accoutingData-{{ forloop.counter }}" style="display: none;" class="item{{ forloop.counter }}">
                                            <div class="card">

                                                <div class="card-header item-table-action__header">
                                                    <span>Account assignment category</span>
                                                    <span onclick="closeAttachSection(this, 'accoutingData-{{ forloop.counter }}')">
                                                        <i class="fas fa-times"></i>
                                                    </span>
                                                </div>
                                                 <div class="card-body">
                                                    <div>
                                                        {% for accounting_data in accounting_details %}
                                                             {% if accounting_data.item_guid_id == item_data.guid %}
                                                                <span class="h6">Account Assignment Category :</span>
                                                                <span >{{ accounting_data.acc_cat }}</span><br>
                                                                <span class="h6"> Distribution Percentage : </span>
                                                                <span >{{ accounting_data.dist_perc }}</span><br>
                                                                <span class="h6">Cost Center: </span>
                                                                <span>{{ accounting_data.cost_center }} </span><br>
                                                                <span class="h6"> Generic Account Assignment : </span>
                                                                <span>{{ accounting_data.generic_acc_ass }}</span><br>
                                                                <span class="h6">GL Account Number: </span>
                                                                <span>{{ accounting_data.gl_acc_num }}</span><br>
                                                             {% endif %}
                                                        {% endfor %}
                                                    </div>
                                                 </div>
                                            </div>
                                        </div>
                                        <!-- end of hideable content which lets the user change cost assignment -->
                                    </td>
                                </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

         <!--  Approval Process overview card section  -->
        <div class="mr-2 ml-2">
            <div class="card card-shadow-1" id="approval_process_overview">
                <div class="card-body">
                    <div>
                        <div id="id_dynamic"></div>
                        <div class="workflow-overview">
                            <div class="card text-dark workflow-overview__process-card" id="workflow_status_div">
                                <div class="card-body">
                                    <span class="h3">Approval Process Overview</span>
                                </div>
                            </div>
                            <div class="workflow-overview__section">
                                <div class="workflow-overview__user-icon-container ao-logged-in-user">
                                    <div class="workflow-user-bg">
                                        <i class="fa fa-user fa-3x" aria-hidden="true"> </i>
                                    </div>
                                    {% for header_data in header_details %}
                                     <button type="button" class="button-workflow-user">{{header_data.requester}}</button>
                                    {% endfor %}
                                </div>
                               {% for approval_data in approval_details %}
                                    <div id="div_manager_detail_{{approval_data.app_id}}" class="workflow-overview__managers-section">
                                        <div class="workflow-overview__next-icon-container">
                                            <i class="fas fa-angle-double-right fa-3x"></i>
                                        </div>
                                        <div class="workflow-overview__user-icon-container">
                                            <div class="workflow-user-bg workflow-completed">
                                                <i class="fas fa-user-check fa-2x icon-workflow-completed" aria-hidden="true"></i>
                                            </div>
                                            <button id="{{approval_data.app_id}}" onclick="show_manager_detail(this.id)" type="button" class="button-workflow-user">{{approval_data.app_id}}</button>
                                        </div>
                                    </div>
                               {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--  start of manager detail pop up-->
        <div class="modal fade show" id="manager-detail-popup" tabindex="-1" aria-hidden="true" role="dialog">
            <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Financial Approval</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="close">
                            <span aria-hidden="true">x</span>
                        </button>
                    </div>
                    <div class="">
                        <table class="table table-bordered" id="manager_detail_table">
                            <thead class="thead-light">
                                <tr>
                                    <th scope="col">Approval Type</th>
                                    <th scope="col">Step Number</th>
                                    <th scope="col">Process Level Status</th>
                                    <th scope="col">Approval Status</th>
                                    <th scope="col">Approver</th>
                                    <th scope="col">Processed On</th>
                                    <th scope="col">Received On</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr></tr>
                                {% for approval_data in approval_details %}
                                    <tr>
                                        <td>{{approval_data.app_desc}}</td>
                                        <td>{{approval_data.step_num }}</td>
                                        <td>{{approval_data.proc_lvl_sts}}</td>
                                        <td>{{approval_data.app_sts}}</td>
                                        <td>{{approval_data.app_id}}</td>
                                        <td>{{approval_data.proc_time}}</td>
                                        <td>{{approval_data.recevied_time}}</td>
<!--                                        <td>{{approval_data.time_zone}}</td>-->
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div style="height:30px; font-size:12px; text-align:right; padding-right:10px;" >© 2022 Hiranya-Garbha Consultancy. All rights reserved.</div>
</div>
{% endif %}
{% if type == 'PO' %}
<div class="container-fluid" style="padding: 1.5rem;">
    <div id="button1" class="d-flex justify-content-between mb-3">
        {% for header_data in header_details %}
        {% if type == 'PO' %}
        <h3>&nbsp;&nbsp;Purchase Order #{{ header_data.doc_number }}</h3>
        {% endif %}
        {% endfor %}
        {% if type == 'CONF' %}
        <h3>&nbsp;&nbsp;Details of Confirmation</h3>
        {% endif %}
        <div class="d-flex">
<!--            <div id="on_page_load">-->
<!--                {% if hdr_det.status == 'SAVED' %}-->
<!--                <div class="mo-doc-button-group__saved">-->
<!--                    <button type="button" class="btn btn-outline-primary" onclick="window.close()"><i class="fas fa-times"></i> Close</button>-->
<!--                </div>-->
<!--                {% else %}-->
<!--                <div class="mo-doc-button-group__saved" >-->
<!--                    <button type="button" class="btn btn-outline-primary" onclick="window.close()"><i class="fas fa-times"></i> Close</button>-->
<!--                </div>-->
<!--                {% endif %}-->
<!--            </div>-->
            <div>
                <!--Display Attachments and POPDF buttons if type is PO-->
                <div>
                    {% if type == 'PO' %}
                    <a target="_blank" href="{% url 'eProc_Archiving:attach_page' guid %}"><button type="button" title = "Click here to get Documents! " >PO PDF & Attachments</button></a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <div class="mo-doc-body-wrapper">
        <!--Display Header Details-->
        <div class="mo-doc-header">
            <div class="card card-shadow-1">
                <div class="card-body mo-doc-header__doc-details" id="header_div1">
                    <div>
                        <div>
                            {% for header_data in header_details %}
                            <div class="row mb-4">
                                <div class="col-md-3">
                                    <span class="po-header-label">Document Number</span><br>
                                    <span class="po-header-desc">{{ header_data.doc_number }}</span>
                                </div>
                                <div class="col-md-3">
                                    <span class="po-header-label">Document Name</span><br>
                                    <span class="po-header-desc">{{header_data.description}}</span>
                                </div>
                                <div class="col-md-3">
                                    <span class="po-header-label">Supplier</span><br>
                                    <span class="po-header-desc">{{header_data.supplier_id}}</span>
                                </div>
                                <div class="col-md-3">
                                    <span class="po-header-label">Created On</span><br>
                                    <span class="po-header-desc">{{header_data.created_at}}</span>
                                </div>
                            </div>

                            <div class="row mb-4">
                                <div class="col-md-3">
                                    <span class="po-header-label">Shipping Address</span><br>
                                    <span class="po-header-desc">
                                        {{po_header_level_address.title}} {{po_header_level_address.name1}}
                                        {{po_header_level_address.name2}}, {{po_header_level_address.street}}
                                        {{po_header_level_address.area}} {{po_header_level_address.landmark}}
                                        {{po_header_level_address.city}} {{po_header_level_address.postal_code}}
                                        {{po_header_level_address.region}} {{po_header_level_address.country_code}}
                                    </span>
                                </div>
                                {% if item_details and item_details|length > 0 %}
                                    <div class="col-md-3">
                                        <span class="po-header-label">Purchasing Organisation</span><br>
                                        <span class="po-header-desc">{{ item_details.0.purch_org }}</span>
                                    </div>
                                    <div class="col-md-3">
                                        <span class="po-header-label">Purchasing Group</span><br>
                                        <span class="po-header-desc">{{ item_details.0.purch_grp }}</span>
                                    </div>
                                {% endif %}
                                <div class="col-md-3">
                                    <span class="po-header-label">Status</span><br>
                                    <span class="badge badge-pill badge_status_approved po-header-desc po-header-desc__status ">{{header_data.status}}</span>
                                </div>

                            </div>

                            <div class="row mb-3">
                                <div class="col-md-3">
                                    <span class="po-header-label">Requested By</span><br>
                                    <span class="po-header-desc"> {{header_data.created_by}}</span>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4">
           <div class="col-md-8">
                <div class="card card-shadow-1">
                    <div class="card-body elements-space-between">
                        <h5>Items Overview</h5>
                    </div>
                    <div>
                        <div class="table-responsive-lg">
                            <table class="table">
                                <thead class="thead-light">
                                <tr>
                                    <th>No.</th>
                                    <th>Item</th>
                                    <th style="width: 20%;">Description</th>
                                    <th>Delivery Date</th>
                                    <th>Price Unit</th>
                                    <th>Unit</th>
                                    <th>Price per unit</th>
                                    <th>Quantity</th>
                                    <th>Total</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for item_data in item_details %}
                                <tr>
                                    <td>{{forloop.counter}}</td>
                                    <td>
                                        <a href="#" onclick="view_detail('{{ po_item_detail.int_product_id}}','{{ po_item_detail.po_item_guid}}')">
                                            <img class="sc-item-table__item-img" onerror='this.src="/static/images/no-image-cropped.png"' src="/media/{{po_item_detail.image_url}}">
                                        </a>
                                    </td>
                                     <td>
                                        <div id="desc-{{items.guid}}">
                                            {% if item_data.call_off == '01'%}
                                            <a href="#" onclick="view_detail('{{ po_item_detail.int_product_id}}','{{ po_item_detail.po_item_guid}}')">{{item_data.prod_description}}</a>
                                            {% else %}
                                            <a  >{{item_data.prod_description}}</a>
                                            {% endif %}
                                        </div>
                                    </td>
                                    <td>{{item_data.item_del_date|date:'Y-m-d'}}</td>
                                    <td>{{item_data.price_unit}}</td>
                                    <td>{{item_data.unit}}</td>
                                    {% for header_data in header_details %}
                                    <td>{{item_data.price}} {{header_data.currency}} </td>
                                    <td>{{item_data.quantity}}</td>
                                    <td class="total-value">{{header_data.total_value}} {{header_data.currency}}</td>
                                    {% endfor %}
                                </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
           </div>
            <div class="col-md-4">
                <div class="card card-shadow-1 po-value-card">
                    <div class="card-body">
                        {% for header_data in header_details %}
                        <div class="po-value-section">
                            <span class="po-value-label">Total Value (Net)</span>
                            <span class="po-value-desc" id="total-value-sum" > {{header_data.currency}}</span>
                        </div>
                        <hr>
                        <div class="po-value-section">
                            <span class="po-value-label">Total Value (Gross)</span>
                            <span class="po-value-desc"> {{header_data.currency}}</span>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col">
                <div class="card sc-completion-item-detail card-shadow-1">
                    {% for item_data in item_details %}
                    <div class="hg_class_prod_desc card-body">
                        <div class="prev-next-btn-group">
                            <button class="btn btn-round" onclick="item_detail_previous(this)">
                                <i id="previous_button_{{forloop.counter0}}" class="fas fa-arrow-left" title="Previous Item"></i>
                            </button>
                            <span class="item-description text-overflow-ellipsis">Item - {{ forloop.counter }} - {{item_data.prod_description}}</span>
                            <button class="btn btn-round" onclick="item_detail_next(this)">
                                <i id="next_button_{{forloop.counter}}" class="fas fa-arrow-right" title="Next Item"></i>
                            </button>
                        </div>
                    </div>
                    {% endfor %}
                    <div>
                       <ul class="sub-tabs h-scrollbar">
                            <li data-tab-target="#item_basic_information" class="sub-tab active">
                                <div class="sub-tab-link text-size-x-small">
                                    <i class="material-icons">info</i><span> Basic Details</span>
                                </div>
                            </li>
                            <li data-tab-target="#item_accountng_details" class="sub-tab">
                                <div class="sub-tab-link text-size-x-small">
                                    <i class="material-icons-outlined"> account_balance_wallet </i><span> Accounting Details</span>
                                </div>
                            </li>
                            <li data-tab-target="#item_approval_process_overview" class="sub-tab" id="item_approval_overview">
                                <div class="sub-tab-link text-size-x-small" onclick="open_item_details(event, 'approval_process_summary')">
                                    <i class="material-icons">check_circle </i><span> Approval Process Overview</span>
                                </div>
                            </li>
                            <li data-tab-target="#related_document" class="sub-tab">
                                <div class="sub-tab-link text-size-x-small">
                                    <i class="fas fa-address-card"></i><span> Related Documents</span>
                                </div>
                            </li>
                       </ul>
                        <div class="tab-content">
                            {% for item_data in item_details %}
                            <div id="item_basic_information" data-tab-content class="active">
                                <div class="m-4">

                                    <div class="hg_class_item_data">

                                        <div class="row">

                                            <div class="col">
                                                <h4>Identification</h4>
                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Item Type</label>
                                                    <div class="col-8">
                                                        <input type="text" class="form-control" name="{{item_data.prod_type}}" value="{{item_data.prod_type}}"
                                                               id="ScItem-prod_type-{{itm.guid}}" disabled>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Description</label>
                                                    <div class="col-8">
                                                        <input class="form-control call_off-{{itm.call_off}}-description" type="text" name="{{item_data.prod_description}}"
                                                               value="{{item_data.prod_description}}" id="ScItem-description-{{itm.guid}}" onchange="update_description(this.id);" disabled>
                                                    </div>
                                                </div>

                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Product Category</label>
                                                    <div class="col-8">
                                                        <input type="text" class="form-control call_off-{{itm.call_off}}-prod_cat" name="{{item_data.prod_cat}}" value="{{item_data.prod_cat}}"
                                                               id="ScItem-prod_cat-{{itm.guid}}" disabled>
                                                    </div>
                                                </div>
                                                {% if itm.call_off in '01' or itm.call_off in '02'%}
                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Catalog</label>
                                                    <div class="col-8">
                                                        <input type="text" class="form-control" name="{{item_data.catalog_id}}"
                                                               value="{{item_data.catalog_id}} - {{itm.catalog_name}}" id="ScItem-catalog_id-{{itm.guid}}" disabled>
                                                    </div>
                                                </div>
                                                {% endif %}

                                                <div class="mt-3">
                                                    <h5 class="h4">Organization</h5>
                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">Company Code</label>
                                                        <div class="col-8">
                                                            <input type="text" class="form-control" name="{{item_data.comp_code}}"
                                                                   value="{{item_data.comp_code}}" id="ScItem-comp_code-{{itm.guid}}" disabled>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">Purchasing Organization</label>
                                                        <div class="col-8">
                                                            <input type="text" class="form-control" name="{{item_data.purch_org}}"
                                                                   value="{{item_data.purch_org}}" id="ScItem-purch_org-{{itm.guid}}" disabled>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">Purchasing Group</label>
                                                        <div class="col-8">
                                                            <select name="{{itm.pgrp_description}}" id="ScItem-purch_grp-{{itm.guid}}" class="form-control" disabled>

                                                                <option>{{item_data.purch_grp}}</option>

                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="mt-3">
                                                    <h4>Further Properties</h4>
                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">Supplier Product Number</label>
                                                        <div class="col-8">
                                                            <input type="text" class="form-control" name="{{item_data.supp_prod_num}}"
                                                                   value="{{item_data.supp_prod_num}}" id="ScItem-supp_product_id-{{itm.guid}}" disabled>
                                                        </div>
                                                    </div>
<!--                                                    <div class="form-group row">-->
<!--                                                        <label class="col-4 col-form-label">Required on</label>-->
<!--                                                        <div class="col-8">-->
<!--                                                            <input type="text" class="form-control" name="{{itm.required_on}}"-->
<!--                                                                   value="{{itm.required_on}}" id="ScItem-required_on-{{itm.guid}}" disabled>-->
<!--                                                        </div>-->
<!--                                                    </div>-->
                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">UNSPSC</label>
                                                        <div class="col-8">
                                                            <input type="text" class="form-control" name="{{item_data.unspsc}}" value="{{item_data.unspsc}}"
                                                                   id="ScItem-prod_cat_id-{{itm.guid}}" disabled>
                                                        </div>
                                                    </div>
<!--                                                    <div class="form-group row">-->
<!--                                                        <label class="col-4 col-form-label">Contract no.</label>-->
<!--                                                        <div class="col-8">-->
<!--                                                            <input type="text" class="form-control" name="{{itm.ctr_num}}"-->
<!--                                                                   value="{{itm.ctr_num}}" id="ScItem-supplier_contact-{{itm.guid}}" disabled>-->
<!--                                                        </div>-->
<!--                                                    </div>-->
<!--                                                    <div class="form-group row">-->
<!--                                                        <label class="col-4 col-form-label">Contract Name</label>-->
<!--                                                        <div class="col-8">-->
<!--                                                            <input type="text" class="form-control" name="{{itm.ctr_item_num}}"-->
<!--                                                                   value="{{itm.ctr_item_num}}" id="ScItem-supplier_name-{{itm.guid}}" disabled>-->
<!--                                                        </div>-->
<!--                                                    </div>-->
                                                    {% if itm.silent_po %}
                                                    <div class="form-group row" hidden>
                                                        <label class="col-4 col-form-label">Silent PO</label>
                                                        <div class="col-8">
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="checkbox" name="{{itm.silent_po}}"
                                                                       id="ScItem-silent_po-{{itm.guid}}_check" checked disabled>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% else %}
                                                    <div class="form-group row" hidden>
                                                        <label class="col-4 col-form-label">Silent PO</label>
                                                        <div class="col-8">
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="checkbox" name="{{itm.silent_po}}"
                                                                       id="ScItem-silent_po-{{itm.guid}}" disabled>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% endif %}
                                                </div>
                                            </div>

                                            <div class="col">
                                                <h4>Currency, Values and Delivery Date</h4>

                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Price/Currency/Price Unit</label>
                                                    <div class="col">
                                                        <input type="text" class="form-control" name="{{item_data.price}}" value="{{item_data.price}}" id="ScItem-price-{{itm.guid}}" onchange="approve_tab_click_trigger_wf(event,this.id,'PRICING_TYPE')" disabled>
                                                    </div>
                                                    <div class="col">
                                                        {% for header_data in header_details %}
                                                        <input type="text" class="form-control" name="{{header_data.currency}}" value="{{header_data.currency}}" id="ScItem-currency-{{itm.guid}}" disabled>
                                                        {% endfor %}
                                                    </div>
                                                    <div class="col">
                                                        <input type="text" class="form-control" name="{{item_data.price_unit}}" value="{{item_data.price_unit}}" id="ScItem-price_unit-{{itm.guid}}" disabled>
                                                    </div>
                                                </div>


                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Quantity/Unit</label>
                                                    <div class="col">
                                                        <input type="text" class="form-control call_off-{{itm.call_off}}-quantity check_number" name="{{item_data.quantity}}" value="{{item_data.quantity}}" id="ScItem-quantity-{{itm.guid}}" onchange="approve_tab_click_trigger_wf(event,this.id,'PRICING_TYPE')" disabled>
                                                    </div>
                                                    <div class="col">
                                                        <input type="text" class="form-control" name="{{item_data.unit}}" value="{{item_data.unit}}" id="EACH" disabled>
                                                    </div>
                                                </div>

                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Total Item Value </label>
                                                    <div class="col-8">
                                                        {% for header_data in header_details %}
                                                        <input type="text" class="form-control" name="{{header_data.total_value}}" value="{{header_data.total_value}}" id="ScItem-value-{{itm.guid}}" disabled>
                                                        {% endfor %}
                                                    </div>
                                                </div>
<!--                                                <div class="form-group row">-->
<!--                                                    <label class="col-4 col-form-label">Incoterm/location</label>-->
<!--                                                    <div class="col">-->
<!--                                                        <input type="text" class="form-control" name="{{itm.incoterm}}" value="{{itm.incoterm}}" id="ScItem-incoterm-{{itm.guid}}" disabled>-->
<!--                                                    </div>-->
<!--                                                    <div class="col">-->
<!--                                                        <input type="text" class="form-control" name="{{itm.incoterm_loc}}" value="{{itm.incoterm_loc}}" id="ScItem-incoterm_loc-{{itm.guid}}" disabled>-->
<!--                                                    </div>-->
<!--                                                </div>-->
                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Goods/Services Recipient </label>
                                                    <div class="col-8">
                                                        <input type="text" class="form-control check_product_name" name="{{item_data.goods_recep}}" value="{{item_data.goods_recep}}" id="ScItem-goods_recep-{{itm.guid}}" disabled>
                                                    </div>
                                                </div>
                                                {% if itm.call_off == 'PR' %}
                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Lead Time </label>
                                                    <div class="col-8">
                                                        <input type="number" min="1" class="form-control pr_lead_time" name="{{itm.lead_time}}" value="{{itm.lead_time}}" id="ScItem-lead_time-{{itm.guid}}" onchange="update_delivery_date('on_lead_time_change', this.id)" disabled>
                                                    </div>
                                                </div>
                                                {% endif %}
                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Delivery Date </label>
                                                    <div class="col-8">
                                                        <input type="text" class="form-control read_only_field" name="{{item_data.item_del_date}}" value="{{item_data.item_del_date|date:'Y-m-d'}}" id="ScItem-item_del_date-{{itm.guid}}" disabled>
                                                    </div>
                                                </div>
<!--                                                <div class="form-group row">-->
<!--                                                    <label class="col-4 col-form-label">Goods Marking</label>-->
<!--                                                    <div class="col-8">-->
<!--                                                        <input type="text" class="form-control" name="{{item_data.goods_marking}}" value="{{item_data.goods_marking}}" id="ScItem-goods_marking-{{itm.guid}}" disabled>-->
<!--                                                    </div>-->
<!--                                                </div>-->
<!--                                                <div class="form-group row">-->
<!--                                                    <label class="col-4 col-form-label">Payment Terms </label>-->
<!--                                                    <div class="col-8">-->
<!--                                                        <input type="text" class="form-control check_number" name="{{item_data.payment_term}}" value="{{item_data.payment_term}}" id="ScItem-payment_term-{{itm.guid}}" disabled>-->
<!--                                                    </div>-->
<!--                                                </div>-->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="item_accountng_details" data-tab-content >
                                <div class="m-4">
                                    {% for accounting_data in accounting_details %}
                                    <div class="hg_class_sc_acc_details">

                                        <div class="row">
                                            <div class="col-6">
                                                <h4>Accounting Details</h4>
                                                <div>
                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">Number </label>
                                                        <div class="col-8">
                                                            <input type="text" class="form-control" name="{{accounting_data.acc_item_num }}"
                                                                   value="{{accounting_data.acc_item_num }}" id="ScAccounting-acc_item_num-{{po_accounting_detail.guid}}" disabled>
                                                        </div>
                                                    </div>

                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">Percentage </label>
                                                        <div class="col-8">
                                                            <input type="text" class="form-control" name="{{accounting_data.dist_perc}}"
                                                                   value="{{accounting_data.dist_perc}}" id="ScAccounting-dist_perc-{{ po_accounting_detail.guid }}" disabled>
                                                        </div>
                                                    </div>

                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">Account Assignment Category </label>
                                                        <div class="col-8">
                                                            <select class="form-control check_multiple_account_asign_type" id="ScAccounting-acc_cat-{{ po_accounting_detail.guid }}"
                                                                    onchange="display_acc_val(this)" class="hg_modal_select_field" disabled>

                                                                <option value="CC - Cost Center">{{accounting_data.acc_cat}}</option>

                                                            </select>
                                                        </div>
                                                    </div>

                                                    {% if accounting_data.cost_center %}
                                                        <div id="id_cost_center{{ forloop.counter }}">
                                                            <div class="form-group row">
                                                                <label class="col-4 col-form-label">Cost Center </label>
                                                                <div class="col-8" id="input_costcenter{{ forloop.counter }}">
                                                                    <input type="text" id="ScAccounting-cost_center-{{ po_accounting_detail.guid }}" class="hg_modal_select_field form-control" name="{{ accounting_data.cost_center }}" value="{{ accounting_data.cost_center }}" onclick="open_account_assign_values_modal(this);" disabled>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endif %}

                                                    {% if accounting_data.asset_number %}
                                                        <div id="id_asset{{ forloop.counter }}">
                                                            <div class="form-group row">
                                                                <label class="col-4 col-form-label">Asset </label>
                                                                <div class="col-8" id="input_asset{{ forloop.counter }}">
                                                                    <input type="text" id="ScAccounting-asset_number-{{ po_accounting_detail.guid }}" class="hg_modal_select_field form-control" name="{{ po_accounting_detail.asset_number }}" value="{{ accounting_data.asset_number }}" onclick="open_account_assign_values_modal(this);" disabled>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endif %}

                                                    {% if accounting_data.internal_order %}
                                                        <div id="id_int_ord{{ forloop.counter }}">
                                                            <div class="form-group row">
                                                                <label class="col-4 col-form-label">Internal Order </label>
                                                                <div class="col-8" id="input_intorder{{ forloop.counter }}">
                                                                    <input type="text" id="ScAccounting-internal_order-{{ po_accounting_detail.guid }}" class="hg_modal_select_field form-control" name="{{ accounting_data.internal_order }}" value="{{ accounting_data.internal_order }}" onclick="open_account_assign_values_modal(this);" disabled>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endif %}

                                                    {% if accounting_data.wbs_ele %}
                                                        <div id="id_wbs{{ forloop.counter }}">
                                                            <div class="form-group row">
                                                                <label class="col-4 col-form-label">WBS </label>
                                                                <div class="col-8" id="input_wbs{{ forloop.counter }}">
                                                                    <input type="text" id="ScAccounting-wbs_ele-{{ po_accounting_detail.guid }}" class="hg_modal_select_field form-control" name="{{ accounting_data.wbs_ele }}" value="{{ accounting_data.wbs_ele }}" onclick="open_account_assign_values_modal(this);" disabled>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endif %}


                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">General Ledger Account </label>
                                                        <div class="col-8">
                                                            <input type="text" class="form-control" value="{{accounting_data.gl_acc_num}}" id="ScAccounting-gl_acc_num-{{ po_accounting_detail.guid }}" class="hg_modal_select_field" disabled>

                                                        </div>
                                                    </div>

                                                    <!--                        <div class="form-group row" id="id_generic_acc_ass{{ forloop.counter }}">-->
                                                    <!--                            <label class="col-4 col-form-label">General Ledger Description: </label>-->
                                                    <!--                            <div class="col-8">-->
                                                    <!--                                {% for gl_acc_append in gl_acc_value_append %}-->
                                                    <!--                                {% if gl_acc_append.account_assign_value == po_accounting_detail.gl_acc_num %}-->
                                                    <!--                                <input type="text" class="form-control" value="{{gl_acc_append.append_val}}" id="ScAccounting-gl_acc_num-{{ po_accounting_detail.guid }}" class="hg_modal_select_field" disabled onclick="open_change_gl_account_modal(this.id);">-->
                                                    <!--                                {% endif %}-->
                                                    <!--                                {% endfor %}-->
                                                    <!--                            </div>-->
                                                    <!--                        </div>-->
                                               </div>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            <div id="item_approval_process_overview" data-tab-content>
                                <div class="m-4">
                                    <div id="id_dynamic1"></div>
                                     <div style="overflow: auto;">
                                         <div class="workflow-overview">
                                             <div class="card text-dark workflow-overview__process-card" id="workflow_status_div1">
                                               <div class="card-body">
                                                   <span class="h3">Approval Process Overview</span> by
                                                   <span class="badge badge-secondary">Financial Approval</span>
                                               </div>
                                             </div>
                                             <div class="workflow-overview__section">
                                                 <div class="workflow-overview__user-icon-container ao-logged-in-user">
                                                     <div class="workflow-user-bg">
                                                         <i class="fa fa-user fa-3x" aria-hidden="true"> </i>
                                                     </div>
                                                     {% for header_data in header_details %}
                                                     <button type="button" class="button-workflow-user">{{header_data.requester}}</button>
                                                     {% endfor %}
                                                 </div>
                                                 <div id="div_manager_detail" class="workflow-overview__managers-section">
                                                     <div class="workflow-overview__next-icon-container">
                                                        <i class="fas fa-angle-double-right fa-3x"></i>
                                                     </div>
                                                     <div class="workflow-overview__user-icon-container">
                                                         <div class="workflow-user-bg workflow-completed">
                                                            <i class="fas fa-user-check fa-2x icon-workflow-completed" aria-hidden="true"> </i>
                                                         </div>
                                                         {% for approval_data in approval_details %}
                                                         <button onclick="show_manager_detail1(this.id);" type="button" class="button-workflow-user">{{approval_data.app_id}}</button>
                                                         {% endfor %}
                                                     </div>
                                                 </div>
                                             </div>
                                         </div>
                                     </div>
                                </div>
                                <!--  start of manager detail pop up-->
                                <div class="modal fade show" id="manager-detail-popup1" tabindex="-1" aria-hidden="true" role="dialog">
                                    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title">Financial Approval</h5>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="close">
                                                    <span aria-hidden="true">x</span>
                                                </button>
                                            </div>
                                            <div class="">
                                                <table class="table table-bordered" id="manager_detail_table1">
                                                    <thead class="thead-light">
                                                        <tr>
                                                            <th scope="col">Approval Type</th>
                                                            <th scope="col">Step Number</th>
                                                            <th scope="col">Process Level Status</th>
                                                            <th scope="col">Approval Status</th>
                                                            <th scope="col">Approver</th>
                                                            <th scope="col">Processed On</th>
                                                            <th scope="col">Received On</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr></tr>
                                                        {% for approval_data in approval_details %}
                                                            <tr>
                                                                <td>{{approval_data.app_desc}}</td>
                                                                <td>{{approval_data.step_num }}</td>
                                                                <td>{{approval_data.proc_lvl_sts}}</td>
                                                                <td>{{approval_data.app_sts}}</td>
                                                                <td>{{approval_data.app_id}}</td>
                                                                <td>{{approval_data.proc_time}}</td>
                                                                <td>{{approval_data.recevied_time}}</td>
                                                            </tr>
                                                        {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="related_document" data-tab-content >
                                <div class="m-4">
                                    <div class="hg_class_related_documents">
                                        <h4>History</h4>
                                        <div class="card-body">
                                            <table class="table">
                                                <thead>
                                                <tr>
                                                    <th>Document</th>
                                                    <th>Name</th>
                                                    <th>Document Number</th>
                                                    <th>Status</th>
                                                    <th>Date</th>
                                                    <th>Quantity</th>
                                                    <th>Unit</th>
                                                    <th>Net Value</th>
                                                    <th>Currency</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td>Shopping Cart</td>
                                                    {% for header_data in header_details %}
                                                    <td>{{ header_data.description }}</td>

                                                    <td>
                                                            <a href="{% url 'eProc_Archiving:document_info' 'SC' item_data.sc_num %}" target="_blank" style="color: blue;">
                                                                {{ item_data.sc_num }}
                                                            </a>
                                                    </td>
                                                    <td>{{ header_data.status }}</td>
                                                    <td>{{ item_data.item_del_date|date:'Y-m-d' }}</td>
                                                    <td>{{ item_data.quantity }}</td>
                                                    <td>{{ item_data.unit }}</td>
                                                    <td>{{ item_data.price }}</td>
                                                    <td>{{ header_data.currency }}</td>
                                                    {% endfor %}
                                                    <script>
                                                        {% for header_data in header_details %}
                                                            console.log("Description:", "{{ header_data.description }}");
                                                            console.log("Status:", "{{ header_data.status }}");
                                                            console.log("Quantity:", "{{ item_data.quantity }}");
                                                            console.log("Currency:", "{{ header_data.currency }}");
                                                        {% endfor %}
                                                    </script>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div style="height:30px; font-size:12px; text-align:right; padding-right:10px;" >© 2022 Hiranya-Garbha Consultancy. All rights reserved.</div>
</div>
{% endif %}
{% if type == 'CONF' %}
<div class="container-fluid" style="padding: 1.5rem;">
    <div id="button2" class="d-flex justify-content-between mb-3">
        {% for header_data in header_details %}
        {% if type == 'CONF' %}
        <h3>&nbsp;&nbsp;Confirmation #{{ header_data.doc_number }}</h3>
        {% endif %}
        {% endfor %}
        <div class="d-flex">
             <div class="mo-doc-button-group__saved" >
                    <button type="button" class="btn btn-outline-primary" onclick="window.close()"><i class="fas fa-times"></i> Close</button>
             </div>
        </div>
    </div>
    <div class="mo-doc-body-wrapper">
        <!--Display Header Details-->
        <div class="mo-doc-header">
            <div class="card card-shadow-1">
                <div class="card-body mo-doc-header__doc-details" id="header_div2">
                    <div>
                        <div>
                            {% for header_data in header_details %}
                            <div class="row mb-4">
                                <div class="col-md-3">
                                    <span class="po-header-label">Document Number</span><br>
                                    <span class="po-header-desc">{{ header_data.doc_number }}</span>
                                </div>
                                <div class="col-md-3">
                                    <span class="po-header-label">Document Name</span><br>
                                    <span class="po-header-desc">{{header_data.description}}</span>
                                </div>
                                <div class="col-md-3">
                                    <span class="po-header-label">Supplier</span><br>
                                    <span class="po-header-desc">{{header_data.supplier_id}}</span>
                                </div>
                                <div class="col-md-3">
                                    <span class="po-header-label">Created On</span><br>
                                    <span class="po-header-desc">{{header_data.created_at}}</span>
                                </div>
                            </div>

                            <div class="row mb-4">
                                <div class="col-md-3">
                                    <span class="po-header-label">Shipping Address</span><br>
                                    <span class="po-header-desc">
                                        {{po_header_level_address.title}} {{po_header_level_address.name1}}
                                        {{po_header_level_address.name2}}, {{po_header_level_address.street}}
                                        {{po_header_level_address.area}} {{po_header_level_address.landmark}}
                                        {{po_header_level_address.city}} {{po_header_level_address.postal_code}}
                                        {{po_header_level_address.region}} {{po_header_level_address.country_code}}
                                    </span>
                                </div>
                                {% if item_details and item_details|length > 0 %}
                                    <div class="col-md-3">
                                        <span class="po-header-label">Purchasing Organisation</span><br>
                                        <span class="po-header-desc">{{ item_details.0.purch_org }}</span>
                                    </div>
                                    <div class="col-md-3">
                                        <span class="po-header-label">Purchasing Group</span><br>
                                        <span class="po-header-desc">{{ item_details.0.purch_grp }}</span>
                                    </div>
                                {% endif %}
<!--                                <div class="col-md-3">-->
<!--                                    <span class="po-header-label">Payment Terms</span><br>-->
<!--                                    <span class="po-header-desc">{{po_header_details.0.payment_term}}</span>-->
<!--                                </div>-->
<!--                                <div class="col-md-3">-->
<!--                                    <span class="po-header-label">Incoterm</span><br>-->
<!--                                    <span class="po-header-desc">{{po_header_details.0.incoterm}} - {{po_header_details.0.incoterm_loc}}</span>-->
<!--                                </div>-->
                                <div class="col-md-3">
                                    <span class="po-header-label">Status</span><br>
                                    <span class="badge badge-pill badge_status_approved po-header-desc po-header-desc__status ">{{header_data.status}}</span>
                                </div>

                            </div>

                            <div class="row mb-3">
                                <div class="col-md-3">
                                    <span class="po-header-label">Requested By</span><br>
                                    <span class="po-header-desc"> {{header_data.created_by}}</span>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4">
           <div class="col-md-8">
                <div class="card card-shadow-1">
                    <div class="card-body elements-space-between">
                        <h5>Items Overview</h5>
                    </div>
                    <div>
                        <div class="table-responsive-lg">
                            <table class="table">
                                <thead class="thead-light">
                                <tr>
                                    <th>No.</th>
                                    <th>Item</th>
                                    <th style="width: 20%;">Description</th>
                                    <th>Delivery Date</th>
                                    <th>Price Unit</th>
                                    <th>Unit</th>
                                    <th>Price per unit</th>
                                    <th>Quantity</th>
                                    <th>Total</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for item_data in item_details %}
                                <tr>
                                    <td>{{forloop.counter}}</td>
                                    <td>
                                        <a href="#" onclick="view_detail('{{ po_item_detail.int_product_id}}','{{ po_item_detail.po_item_guid}}')">
                                            <img class="sc-item-table__item-img" onerror='this.src="/static/images/no-image-cropped.png"' src="/media/{{po_item_detail.image_url}}">
                                        </a>
                                    </td>
                                     <td>
                                        <div id="desc2-{{items.guid}}">
                                            {% if item_data.call_off == '01'%}
                                            <a href="#" onclick="view_detail('{{ po_item_detail.int_product_id}}','{{ po_item_detail.po_item_guid}}')">{{item_data.prod_description}}</a>
                                            {% else %}
                                            <a  >{{item_data.prod_description}}</a>
                                            {% endif %}
                                        </div>
                                    </td>
                                    <td>{{item_data.item_del_date|date:'Y-m-d'}}</td>
                                    <td>{{item_data.price_unit}}</td>
                                    <td>{{item_data.unit}}</td>
                                    {% for header_data in header_details %}
                                    <td>{{item_data.price}} {{header_data.currency}} </td>
                                    <td>{{item_data.quantity}}</td>
                                    <td class="total-value">{{header_data.total_value}} {{header_data.currency}}</td>
                                    {% endfor %}
                                </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
           </div>
            <div class="col-md-4">
                <div class="card card-shadow-1 po-value-card">
                    <div class="card-body">
                        {% for header_data in header_details %}
                        <div class="po-value-section">
                            <span class="po-value-label">Total Value (Net)</span>
                            <span class="po-value-desc" id="total-value-sum2" > {{header_data.currency}}</span>
                        </div>
                        <hr>
                        <div class="po-value-section">
                            <span class="po-value-label">Total Value (Gross)</span>
                            <span class="po-value-desc"> {{header_data.currency}}</span>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col">
                <div class="card sc-completion-item-detail card-shadow-1">
                    {% for item_data in item_details %}
                    <div class="hg_class_prod_desc card-body">
                        <div class="prev-next-btn-group">
                            <button class="btn btn-round" onclick="item_detail_previous(this)">
                                <i id="previous_button2_{{forloop.counter0}}" class="fas fa-arrow-left" title="Previous Item"></i>
                            </button>
                            <span class="item-description text-overflow-ellipsis">Item - {{ forloop.counter }} - {{item_data.prod_description}}</span>
                            <button class="btn btn-round" onclick="item_detail_next(this)">
                                <i id="next_button2_{{forloop.counter}}" class="fas fa-arrow-right" title="Next Item"></i>
                            </button>
                        </div>
                    </div>
                    {% endfor %}
                    <div>
                       <ul class="sub-tabs h-scrollbar">
                            <li data-tab-target="#item_basic_information" class="sub-tab active">
                                <div class="sub-tab-link text-size-x-small">
                                    <i class="material-icons">info</i><span> Basic Details</span>
                                </div>
                            </li>
                           <li data-tab-target="#item_accountng_details" class="sub-tab">
                                <div class="sub-tab-link text-size-x-small">
                                    <i class="material-icons-outlined"> account_balance_wallet </i><span> Accounting Details</span>
                                </div>
                            </li>
<!--                           <li data-tab-target="#item_approval_process_overview" class="sub-tab" id="item_approval_overview">-->
<!--                                <div class="sub-tab-link text-size-x-small" onclick="open_item_details(event, 'approval_process_summary')">-->
<!--                                    <i class="material-icons">check_circle </i><span> Approval Process Overview</span>-->
<!--                                </div>-->
<!--                           </li>-->
                           <li data-tab-target="#related_document" class="sub-tab">
                                <div class="sub-tab-link text-size-x-small">
                                    <i class="fas fa-address-card"></i><span> Related Documents</span>
                                </div>
                           </li>
                       </ul>
                        <div class="tab-content">
                            {% for item_data in item_details %}
                            <div id="item_basic_information2" data-tab-content class="active">
                                <div class="m-4">

                                    <div class="hg_class_item_data">

                                        <div class="row">

                                            <div class="col">
                                                <h4>Identification</h4>
                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Item Type</label>
                                                    <div class="col-8">
                                                        <input type="text" class="form-control" name="{{item_data.prod_type}}" value="{{item_data.prod_type}}"
                                                               id="ScItem-prod_type2-{{itm.guid}}" disabled>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Description</label>
                                                    <div class="col-8">
                                                        <input class="form-control call_off-{{itm.call_off}}-description" type="text" name="{{item_data.prod_description}}"
                                                               value="{{item_data.prod_description}}" id="ScItem-description2-{{itm.guid}}" onchange="update_description(this.id);" disabled>
                                                    </div>
                                                </div>

                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Product Category</label>
                                                    <div class="col-8">
                                                        <input type="text" class="form-control call_off-{{itm.call_off}}-prod_cat" name="{{item_data.prod_cat}}" value="{{item_data.prod_cat}}"
                                                               id="ScItem-prod_cat2-{{itm.guid}}" disabled>
                                                    </div>
                                                </div>
                                                {% if itm.call_off in '01' or itm.call_off in '02'%}
                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Catalog</label>
                                                    <div class="col-8">
                                                        <input type="text" class="form-control" name="{{item_data.catalog_id}}"
                                                               value="{{item_data.catalog_id}} - {{itm.catalog_name}}" id="ScItem-catalog_id2-{{itm.guid}}" disabled>
                                                    </div>
                                                </div>
                                                {% endif %}

                                                <div class="mt-3">
                                                    <h5 class="h4">Organization</h5>
                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">Company Code</label>
                                                        <div class="col-8">
                                                            <input type="text" class="form-control" name="{{item_data.comp_code}}"
                                                                   value="{{item_data.comp_code}}" id="ScItem-comp_code2-{{itm.guid}}" disabled>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">Purchasing Organization</label>
                                                        <div class="col-8">
                                                            <input type="text" class="form-control" name="{{item_data.purch_org}}"
                                                                   value="{{item_data.purch_org}}" id="ScItem-purch_org2-{{itm.guid}}" disabled>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">Purchasing Group</label>
                                                        <div class="col-8">
                                                            <select name="{{itm.pgrp_description}}" id="ScItem-purch_grp2-{{itm.guid}}" class="form-control" disabled>

                                                                <option>{{item_data.purch_grp}}</option>

                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="mt-3">
                                                    <h4>Further Properties</h4>
                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">Supplier Product Number</label>
                                                        <div class="col-8">
                                                            <input type="text" class="form-control" name="{{item_data.supp_prod_num}}"
                                                                   value="{{item_data.supp_prod_num}}" id="ScItem-supp_product_id2-{{itm.guid}}" disabled>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">UNSPSC</label>
                                                        <div class="col-8">
                                                            <input type="text" class="form-control" name="{{item_data.unspsc}}" value="{{item_data.unspsc}}"
                                                                   id="ScItem-prod_cat_id2-{{itm.guid}}" disabled>
                                                        </div>
                                                    </div>
                                                    {% if itm.silent_po %}
                                                    <div class="form-group row" hidden>
                                                        <label class="col-4 col-form-label">Silent PO</label>
                                                        <div class="col-8">
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="checkbox" name="{{itm.silent_po}}"
                                                                       id="ScItem-silent_po-{{itm.guid}}_check2" checked disabled>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% else %}
                                                    <div class="form-group row" hidden>
                                                        <label class="col-4 col-form-label">Silent PO</label>
                                                        <div class="col-8">
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="checkbox" name="{{itm.silent_po}}"
                                                                       id="ScItem-silent_po2-{{itm.guid}}" disabled>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% endif %}
                                                </div>
                                            </div>
                                            <div class="col">
                                                <h4>Currency, Values and Delivery Date</h4>

                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Price/Currency/Price Unit</label>
                                                    <div class="col">
                                                        <input type="text" class="form-control" name="{{item_data.price}}" value="{{item_data.price}}" id="ScItem-price2-{{itm.guid}}" onchange="approve_tab_click_trigger_wf(event,this.id,'PRICING_TYPE')" disabled>
                                                    </div>
                                                    <div class="col">
                                                        {% for header_data in header_details %}
                                                        <input type="text" class="form-control" name="{{header_data.currency}}" value="{{header_data.currency}}" id="ScItem-currency2-{{itm.guid}}" disabled>
                                                        {% endfor %}
                                                    </div>
                                                    <div class="col">
                                                        <input type="text" class="form-control" name="{{item_data.price_unit}}" value="{{item_data.price_unit}}" id="ScItem-price_unit2-{{itm.guid}}" disabled>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Quantity/Unit</label>
                                                    <div class="col">
                                                        <input type="text" class="form-control call_off-{{itm.call_off}}-quantity check_number" name="{{item_data.quantity}}" value="{{item_data.quantity}}" id="ScItem-quantity2-{{itm.guid}}" onchange="approve_tab_click_trigger_wf(event,this.id,'PRICING_TYPE')" disabled>
                                                    </div>
                                                    <div class="col">
                                                        <input type="text" class="form-control" name="{{item_data.unit}}" value="{{item_data.unit}}" id="EACH2" disabled>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Total Item Value </label>
                                                    <div class="col-8">
                                                        {% for header_data in header_details %}
                                                        <input type="text" class="form-control" name="{{header_data.total_value}}" value="{{header_data.total_value}}" id="ScItem-value2-{{itm.guid}}" disabled>
                                                        {% endfor %}
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Goods/Services Recipient </label>
                                                    <div class="col-8">
                                                        <input type="text" class="form-control check_product_name" name="{{item_data.goods_recep}}" value="{{item_data.goods_recep}}" id="ScItem-goods_recep2-{{itm.guid}}" disabled>
                                                    </div>
                                                </div>
                                                {% if itm.call_off == 'PR' %}
                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Lead Time </label>
                                                    <div class="col-8">
                                                        <input type="number" min="1" class="form-control pr_lead_time" name="{{itm.lead_time}}" value="{{itm.lead_time}}" id="ScItem-lead_time2-{{itm.guid}}" onchange="update_delivery_date('on_lead_time_change', this.id)" disabled>
                                                    </div>
                                                </div>
                                                {% endif %}
                                                <div class="form-group row">
                                                    <label class="col-4 col-form-label">Delivery Date </label>
                                                    <div class="col-8">
                                                        <input type="text" class="form-control read_only_field" name="{{item_data.item_del_date}}" value="{{item_data.item_del_date|date:'Y-m-d'}}" id="ScItem-item_del_date2-{{itm.guid}}" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="item_accountng_details" data-tab-content >
                                <div class="m-4">
                                    {% for accounting_data in accounting_details %}
                                    <div class="hg_class_sc_acc_details">

                                        <div class="row">
                                            <div class="col-6">
                                                <h4>Accounting Details</h4>
                                                <div>
                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">Number </label>
                                                        <div class="col-8">
                                                            <input type="text" class="form-control" name="{{accounting_data.acc_item_num }}"
                                                                   value="{{accounting_data.acc_item_num }}" id="ScAccounting-acc_item_num2-{{po_accounting_detail.guid}}" disabled>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">Percentage </label>
                                                        <div class="col-8">
                                                            <input type="text" class="form-control" name="{{accounting_data.dist_perc}}"
                                                                   value="{{accounting_data.dist_perc}}" id="ScAccounting-dist_perc2-{{ po_accounting_detail.guid }}" disabled>
                                                        </div>
                                                    </div>

                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">Account Assignment Category </label>
                                                        <div class="col-8">
                                                            <select class="form-control check_multiple_account_asign_type" id="ScAccounting-acc_cat2-{{ po_accounting_detail.guid }}"
                                                                    onchange="display_acc_val(this)" class="hg_modal_select_field" disabled>

                                                                <option value="CC - Cost Center">{{accounting_data.acc_cat}}</option>

                                                            </select>
                                                        </div>
                                                    </div>
                                                    {% if accounting_data.cost_center %}
                                                        <div id="id_cost_center2{{ forloop.counter }}">
                                                            <div class="form-group row">
                                                                <label class="col-4 col-form-label">Cost Center </label>
                                                                <div class="col-8" id="input_costcenter2{{ forloop.counter }}">
                                                                    <input type="text" id="ScAccounting-cost_center2-{{ po_accounting_detail.guid }}" class="hg_modal_select_field form-control" name="{{ accounting_data.cost_center }}" value="{{ accounting_data.cost_center }}" onclick="open_account_assign_values_modal(this);" disabled>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endif %}

                                                    {% if accounting_data.asset_number %}
                                                        <div id="id_asset2{{ forloop.counter }}">
                                                            <div class="form-group row">
                                                                <label class="col-4 col-form-label">Asset </label>
                                                                <div class="col-8" id="input_asset2{{ forloop.counter }}">
                                                                    <input type="text" id="ScAccounting-asset_number2-{{ po_accounting_detail.guid }}" class="hg_modal_select_field form-control" name="{{ po_accounting_detail.asset_number }}" value="{{ accounting_data.asset_number }}" onclick="open_account_assign_values_modal(this);" disabled>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endif %}

                                                    {% if accounting_data.internal_order %}
                                                        <div id="id_int_ord2{{ forloop.counter }}">
                                                            <div class="form-group row">
                                                                <label class="col-4 col-form-label">Internal Order </label>
                                                                <div class="col-8" id="input_intorder2{{ forloop.counter }}">
                                                                    <input type="text" id="ScAccounting-internal_order2-{{ po_accounting_detail.guid }}" class="hg_modal_select_field form-control" name="{{ accounting_data.internal_order }}" value="{{ accounting_data.internal_order }}" onclick="open_account_assign_values_modal(this);" disabled>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endif %}

                                                    {% if accounting_data.wbs_ele %}
                                                        <div id="id_wbs2{{ forloop.counter }}">
                                                            <div class="form-group row">
                                                                <label class="col-4 col-form-label">WBS </label>
                                                                <div class="col-8" id="input_wbs2{{ forloop.counter }}">
                                                                    <input type="text" id="ScAccounting-wbs_ele2-{{ po_accounting_detail.guid }}" class="hg_modal_select_field form-control" name="{{ accounting_data.wbs_ele }}" value="{{ accounting_data.wbs_ele }}" onclick="open_account_assign_values_modal(this);" disabled>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endif %}


                                                    <div class="form-group row">
                                                        <label class="col-4 col-form-label">General Ledger Account </label>
                                                        <div class="col-8">
                                                            <input type="text" class="form-control" value="{{accounting_data.gl_acc_num}}" id="ScAccounting-gl_acc_num2-{{ po_accounting_detail.guid }}" class="hg_modal_select_field" disabled>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
<!--                            <div id="item_approval_process_overview" data-tab-content>-->
<!--                                <div class="m-4">-->
<!--                                    <div id="id_dynamic1"></div>-->
<!--                                     <div style="overflow: auto;">-->
<!--                                         <div class="workflow-overview">-->
<!--                                             <div class="card text-dark workflow-overview__process-card" id="workflow_status_div1">-->
<!--                                               <div class="card-body">-->
<!--                                                   <span class="h3">Approval Process Overview</span> by-->
<!--                                                   <span class="badge badge-secondary">Financial Approval</span>-->
<!--                                               </div>-->
<!--                                             </div>-->
<!--                                             <div class="workflow-overview__section">-->
<!--                                                 <div class="workflow-overview__user-icon-container ao-logged-in-user">-->
<!--                                                     <div class="workflow-user-bg">-->
<!--                                                         <i class="fa fa-user fa-3x" aria-hidden="true"> </i>-->
<!--                                                     </div>-->
<!--                                                     {% for header_data in header_details %}-->
<!--                                                     <button type="button" class="button-workflow-user">{{header_data.requester}}</button>-->
<!--                                                     {% endfor %}-->
<!--                                                 </div>-->
<!--                                                 <div id="div_manager_detail" class="workflow-overview__managers-section">-->
<!--                                                     <div class="workflow-overview__next-icon-container">-->
<!--                                                        <i class="fas fa-angle-double-right fa-3x"></i>-->
<!--                                                     </div>-->
<!--                                                     <div class="workflow-overview__user-icon-container">-->
<!--                                                         <div class="workflow-user-bg workflow-completed">-->
<!--                                                            <i class="fas fa-user-check fa-2x icon-workflow-completed" aria-hidden="true"> </i>-->
<!--                                                         </div>-->
<!--                                                         {% for approval_data in approval_details %}-->
<!--                                                         <button onclick="show_manager_detail1(this.id);" type="button" class="button-workflow-user">{{approval_data.app_id}}</button>-->
<!--                                                         {% endfor %}-->
<!--                                                     </div>-->
<!--                                                 </div>-->
<!--                                             </div>-->
<!--                                         </div>-->
<!--                                     </div>-->
<!--                                </div>-->
<!--                                &lt;!&ndash;  start of manager detail pop up&ndash;&gt;-->
<!--                                <div class="modal fade show" id="manager-detail-popup1" tabindex="-1" aria-hidden="true" role="dialog">-->
<!--                                    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">-->
<!--                                        <div class="modal-content">-->
<!--                                            <div class="modal-header">-->
<!--                                                <h5 class="modal-title">Financial Approval</h5>-->
<!--                                                <button type="button" class="close" data-dismiss="modal" aria-label="close">-->
<!--                                                    <span aria-hidden="true">x</span>-->
<!--                                                </button>-->
<!--                                            </div>-->
<!--                                            <div class="">-->
<!--                                                <table class="table table-bordered" id="manager_detail_table1">-->
<!--                                                    <thead class="thead-light">-->
<!--                                                        <tr>-->
<!--                                                            <th scope="col">Approval Type</th>-->
<!--                                                            <th scope="col">Step Number</th>-->
<!--                                                            <th scope="col">Process Level Status</th>-->
<!--                                                            <th scope="col">Approval Status</th>-->
<!--                                                            <th scope="col">Approver</th>-->
<!--                                                            <th scope="col">Processed On</th>-->
<!--                                                            <th scope="col">Received On</th>-->
<!--                                                        </tr>-->
<!--                                                    </thead>-->
<!--                                                    <tbody>-->
<!--                                                        <tr></tr>-->
<!--                                                        {% for approval_data in approval_details %}-->
<!--                                                            <tr>-->
<!--                                                                <td>{{approval_data.app_desc}}</td>-->
<!--                                                                <td>{{approval_data.step_num }}</td>-->
<!--                                                                <td>{{approval_data.proc_lvl_sts}}</td>-->
<!--                                                                <td>{{approval_data.app_sts}}</td>-->
<!--                                                                <td>{{approval_data.app_id}}</td>-->
<!--                                                                <td>{{approval_data.proc_time}}</td>-->
<!--                                                                <td>{{approval_data.recevied_time}}</td>-->
<!--                                                            </tr>-->
<!--                                                        {% endfor %}-->
<!--                                                    </tbody>-->
<!--                                                </table>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
                            <div id="related_document" data-tab-content >
                                <div class="m-4">
                                    <div class="hg_class_related_documents">
                                        <h4>History</h4>
                                        <div class="card-body">
                                            <table class="table">
                                                <thead>
                                                <tr>
                                                    <th>Document</th>
                                                    <th>Name</th>
                                                    <th>Document Number</th>
                                                    <th>Status</th>
                                                    <th>Date</th>
                                                    <th>Quantity</th>
                                                    <th>Unit</th>
                                                    <th>Net Value</th>
                                                    <th>Currency</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td>Purchase Order</td>
                                                    {% for header_data in header_details %}
                                                    <td>{{ header_data.description }}</td>
                                                    {% if type == 'CONF' %}
                                                    <td><a href="{% url 'eProc_Archiving:document_info' 'PO' header_data.po_doc_number %}" target="_blank" style="color: blue;">{{ header_data.po_doc_number }}</a></td>
                                                    {% endif %}
                                                    <td>{{ header_data.status }}</td>
                                                    <td>{{ item_data.item_del_date|date:'Y-m-d' }}</td>
                                                    <td>{{ item_data.quantity }}</td>
                                                    <td>{{ item_data.unit }}</td>
                                                    <td>{{ item_data.price }}</td>
                                                    <td>{{ header_data.currency }}</td>
                                                    {% endfor %}
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% include 'ProductDetailPopup/basic_product_detail_popup.html' %}
<script src="{% static 'scripts/manager-details.js' %}"></script>
<script>
    var GLOBAL_SELECT_ITEM_NUM = 0
    // Close action sections i item details table
    function closeAttachSection(obj, data) {
        item_number = data.substr(-1)
        var x = data;
        document.getElementById(x).style.display = "none"
        document.getElementById('item_info_tr-'+item_number).hidden = true;
    }

    // Function to hide and show hidden table row contents.
    function showSection(obj, data) {
        item_number = data.split('-')[1]
        GLOBAL_SELECT_ITEM_NUM = item_number
        document.getElementById('item_info_tr-'+item_number).hidden = false;
        if (data.includes('attachments')) {
            get_attachment_IDB(item_number)
        }
        var dropdownContentClass = data;
        var rowId = document.getElementById(dropdownContentClass);
        var rowClass = rowId.className;
        var hideableRowSection = document.getElementsByClassName(rowClass);

        for (var i = 0; i < hideableRowSection.length; i++) {
            var current_element = hideableRowSection[i].id
            if (current_element == dropdownContentClass) {
                hideableRowSection[i].style.display = 'block';
            } else {
                hideableRowSection[i].style.display = 'none';
            }
        }
    }

    // Function to toggle note type textarea
    function selectNoteType(data) {
        var getNotebtnClass1 = data.className.split(" ")[0]
        var getNotebtnClass2 = data.className.split(" ")[1]
        var activeNoteBtn = document.getElementsByClassName(getNotebtnClass1);
        var noteBtnId = data.id
        var textareaId = document.getElementById(getNotebtnClass2);
        var textareaClass = textareaId.className;
        var hideableNoteText = document.getElementsByClassName(textareaClass);


        for (var i = 0; i < hideableNoteText.length; i++) {
            var current_element = hideableNoteText[i].id
            if (current_element == getNotebtnClass2) {
                hideableNoteText[i].style.display = 'block';
            } else {
                hideableNoteText[i].style.display = 'none';
            }
        }

        for (var i = 0; i < activeNoteBtn.length; i++) {
            var current_button = activeNoteBtn[i].id
            if (current_button==noteBtnId){
                activeNoteBtn[i].style.backgroundColor = '#007bff';
                activeNoteBtn[i].style.color = '#ffffff';
            } else{
                activeNoteBtn[i].style.backgroundColor = '#dbdad9';
                activeNoteBtn[i].style.color = '#000000';
            }
        }
    }

 function show_manager_detail(id) {
    sc_app_guid_data = {};
    sc_app_guid_data['guid'] = id;

    ajax_get_manager_detail(sc_app_guid_data)

    $('#manager_detail_body').empty();
    trHTML = '<tr></tr>';
    $.each(response, function (i, sc_app) {
        trHTML += '<tr><td>' + sc_app.fields.app_desc + '</td><td >' + sc_app.fields.step_num + '</td><td>' + sc_app.fields.proc_lvl_sts + '</td><td>' + sc_app.fields.app_sts + '</td><td>' + sc_app.fields.app_id + '</td><td>' + sc_app.fields.proc_time + '</td><td>' + sc_app.fields.received_time + '</td></tr>';
    });
    $('#manager_detail_body').append(trHTML);
    $('#manager-detail-popup').modal('show');

}

function ajax_get_manager_detail(data) {
    urlLink = "{% url 'eProc_Doc_Search:get_sc_app_data' %}";
    AjaxCallAPI(urlLink, data);
}

 //PO Page Script start

  var acc_visible_div = 0;
    var addr_visible_div = 0;
    var sc_calloff = '';
    var edit_flag = false;
    var eform_display = false;
    var item_detail_visible_div = 0;
    var rendered_call_off = [];
    var rendered_acc = [];
    var rendered_acc_guid = [];
    var rendered_item_guid = [];
    var rendered_sc_addr = [];
    var rendered_supp_note = [];
    var rendered_int_note = [];
    var rendered_price = [];
    var rendered_price_unit = [];
    var rendered_quantity = [];
    var rendered_catalog_qty = [];
    var rendered_eform = [];
    var GLOBAL_MANAGER_DETAIL = [];
    var internal_supplier_error_itemNumber = []
    var highest_item_acc_asgn_cat = '';
    var highest_item_change_acc_value = '';
    var GLOBAL_TAB_ID = 'item_data';
    var GLOBAL_ID_IGNORE_LIST = ['select_item']
    // Store  header Guid and company code in global variable
    var GLOBAL_SC_CO_CODE = '{{po_header_details.company_code_id}}';
    var GLOBAL_HEADER_GUID = "{{po_header_details.guid}}";
    var GLOBAL_DOCUMENT_NUMBER = "{{po_header_details.doc_number}}"
    // store rendered highest item guid in global variable
    //var GLOBAL_HIGHEST_ITEM_GUID = '{{highest_item_guid|safe}}';
    var GLOBAL_HIGHEST_VALUE_ITEM_ROW

$(document).ready(function () {
    $('#nav_menu_items').remove();
<!--    $("body").css("padding-top", "3.7rem");-->
    NavigateTabs(); // Custom function to switch tabs
    {% for item in item_details %}
        rendered_call_off.push('{{item.call_off|safe}}');
        rendered_item_guid.push('{{item.guid|safe}}');
        rendered_price.push('{{item.price|safe}}');
        rendered_price_unit.push('{{item.price_unit|safe}}');
        rendered_quantity.push('{{item.quantity|safe}}');
        rendered_catalog_qty.push('{{item.catalog_qty|safe}}');
        var eform_id = '{{item.eform_id|safe}}';
        var call_off = '{{item.call_off|safe}}'
        if(eform_id == ''){
            rendered_eform.push('None');
        }
        else if(call_off == '02'){
            rendered_eform.push('{{item.eform_id|safe}}');
        }
        else{
            rendered_eform.push('None');
        }
        {% endfor %}
        {% for po_addr in po_item_level_address %}
        rendered_sc_addr.push('{{po_addr.guid|safe}}');
        {% endfor %}
        {% for supp_note in supplier_notes %}
        rendered_supp_note.push('{{supp_note.guid|safe}}');
        {% endfor %}
        {% for int_note in internal_notes %}
        rendered_int_note.push('{{int_note.guid|safe}}');
        {% endfor %}
        {% for po_accounting_detail in po_accounting_details %}
        rendered_acc.push('{{po_accounting_detail.acc_cat|safe}}');
        rendered_acc_guid.push('{{po_accounting_detail.guid|safe}}');
        {% endfor %}
        {% for po_approver_detail in po_approver_details %}
        GLOBAL_MANAGER_DETAIL.push('{{po_approver_detail.app_id|safe}}');
        {% endfor %}
        show_item_detail_div();
});

function show_item_detail_div() {

    $(".hg_class_item_data").hide();
    $(".hg_class_prod_desc").hide();
    $(".hg_class_sc_acc_details").hide();
    $(".hg_supp_note_content").hide();
    $(".hg_int_note_content").hide();
    $(".dummy_eform_class").hide();
    $(".hg_attachment_content").hide();
    $(".hg_class_del_addrs").hide();
    $(".related_documents").hide();
    $(".hg_class_attachement").hide();
    $(".hg_supplier_class").hide();
    $(".hg_class_item_data:eq(" + item_detail_visible_div + ")").show();
    $(".hg_class_prod_desc:eq(" + item_detail_visible_div + ")").show();
    $(".hg_class_sc_acc_details:eq(" + item_detail_visible_div + ")").show();
    $(".hg_supp_note_content:eq(" + item_detail_visible_div + ")").show();
    $(".hg_int_note_content:eq(" + item_detail_visible_div + ")").show();
    $(".hg_attachment_content:eq(" + item_detail_visible_div + ")").show();
    $(".hg_class_del_addrs:eq(" + item_detail_visible_div + ")").show();
    $(".related_documents:eq(" + item_detail_visible_div + ")").show();
    $(".hg_class_attachement:eq(" + item_detail_visible_div + ")").show();
    $(".hg_supplier_class:eq(" + item_detail_visible_div + ")").show();
    item_num = item_detail_visible_div + 1;
    if (rendered_eform[item_detail_visible_div] !== "None") {
        $('#eform_tab').show();
        $('.hg_class_eform').hide()
        $("#display_eform-" + rendered_item_guid[item_detail_visible_div]+"-"+item_detail_visible_div).show()
        if (GLOBAL_TAB_ID == "eForm"){
            document.getElementById("eForm").style.display = "block";
        }
    }
    else{

        //document.getElementById(GLOBAL_TAB_ID).style.display = "none";
        $('#eform_tab').hide();
        $('.hg_class_eform').hide()
        if (GLOBAL_TAB_ID == "eForm"){
            GLOBAL_TAB_ID ="item_data"
            document.getElementById("item_tab_id").style.background = '#007BFF';
            document.getElementById("item_tab_id").style.color = '#FFFFFF';
            document.getElementById("eform_tab").style.background = '#FFFFFF';
            document.getElementById("eform_tab").style.color = '#007BFF';
            document.getElementById("item_data").style.display = "block";


        }

    }
    if (edit_flag) {
        // Item data
        $('.pr_lead_time').prop('disabled', false)
        $("#ScItem-purch_grp-" + rendered_item_guid[item_detail_visible_div]).prop("disabled", false);
        $("#ScItem-silent_po-" + rendered_item_guid[item_detail_visible_div]).prop("disabled", false);
        $("#ScItem-silent_po-" + rendered_item_guid[item_detail_visible_div]).prop("disabled", false);
        $("#ScItem-catalog_qty-" + rendered_item_guid[item_detail_visible_div]).prop("disabled", false);
        $("#ScItem-quantity-" + rendered_item_guid[item_detail_visible_div]).prop("disabled", false);
        $("#ScItem-goods_recep-" + rendered_item_guid[item_detail_visible_div]).prop("disabled", false);
        $("#ScItem-goods_marking-" + rendered_item_guid[item_detail_visible_div]).prop("disabled", false);
        // Accounting data
        $("#ScAccounting-acc_cat-" + rendered_acc_guid[item_detail_visible_div]).prop("disabled", false);
        $("#ScAccounting-cost_center-" + rendered_acc_guid[item_detail_visible_div]).prop("disabled", false);
        $("#ScAccounting-asset_number-" + rendered_acc_guid[item_detail_visible_div]).prop("disabled", false);
        $("#ScAccounting-internal_order-" + rendered_acc_guid[item_detail_visible_div]).prop("disabled", false);
        $("#ScAccounting-wbs_ele-" + rendered_acc_guid[item_detail_visible_div]).prop("disabled", false);
        $("#ScAccounting-account_assign_value-" + rendered_acc_guid[item_detail_visible_div]).prop("disabled", false);
        //$("#ScAccounting-gl_acc_num-" + rendered_acc_guid[item_detail_visible_div]).prop("disabled", false);
        // delivery address
        $("#ScAddresses-name1-" + rendered_sc_addr[item_detail_visible_div]).prop("disabled", false);
        $("#ScAddresses-name2-" + rendered_sc_addr[item_detail_visible_div]).prop("disabled", false);
        $("#ScAddresses-fax_number-" + rendered_sc_addr[item_detail_visible_div]).prop("disabled", false);
        $("#ScAddresses-street-" + rendered_sc_addr[item_detail_visible_div]).prop("disabled", false);
        $("#ScAddresses-area-" + rendered_sc_addr[item_detail_visible_div]).prop("disabled", false);
        $("#ScAddresses-landmark-" + rendered_sc_addr[item_detail_visible_div]).prop("disabled", false);
        $("#ScAddresses-city-" + rendered_sc_addr[item_detail_visible_div]).prop("disabled", false);
        $("#ScAddresses-region-" + rendered_sc_addr[item_detail_visible_div]).prop("disabled", false);
        $("#ScAddresses-country_code-" + rendered_sc_addr[item_detail_visible_div]).prop("disabled", false);
        $("#ScAddresses-language_id-" + rendered_sc_addr[item_detail_visible_div]).prop("disabled", false);
        $("#ScAddresses-mobile_number-" + rendered_sc_addr[item_detail_visible_div]).prop("disabled", false);
        $("#ScAddresses-telephone_number-" + rendered_sc_addr[item_detail_visible_div]).prop("disabled", false);
        $("#ScAddresses-email-" + rendered_sc_addr[item_detail_visible_div]).prop("disabled", false);
        $("#ScAddresses-postalcode-" + rendered_sc_addr[item_detail_visible_div]).prop("disabled", false);

        //Internal and external note
        $("#Notes-note_text-" + rendered_int_note[item_detail_visible_div] + "-I").prop("disabled", false);
        $("#Notes-note_text-" + rendered_supp_note[item_detail_visible_div] + "-S").prop("disabled", false);
        //supplier data
        $("#ScItem-supplier_id-" + rendered_item_guid[item_detail_visible_div] + "-drop").prop("disabled", false);
        $("#ScItem-pref_supplier-" + rendered_item_guid[item_detail_visible_div] + "-drop").prop("disabled", false);
        $("#ScItem-supplier_id-" + rendered_item_guid[item_detail_visible_div]).prop("disabled", false);
        $("#ScItem-pref_supplier-" + rendered_item_guid[item_detail_visible_div]).prop("disabled", false);
        $("#ScItem-supplier_id-" + rendered_item_guid[item_detail_visible_div] + "-drop-ft").prop("disabled", false);

        if (rendered_call_off[item_detail_visible_div] === "01" || rendered_call_off[item_detail_visible_div] === "02") {
        //if (sc_calloff === "Catalog" || sc_calloff === "Freetext") {
            $("#ScItem-payment_term-" + rendered_item_guid[item_detail_visible_div]).prop("disabled", false);
        }
        if (rendered_call_off[item_detail_visible_div] == '03') {
            $("#ScItem-description-" + rendered_item_guid[item_detail_visible_div]).prop("disabled", false);
            $("#ScItem-price-" + rendered_item_guid[item_detail_visible_div]).prop("disabled", false);
            $("#ScItem-price_unit-" + rendered_item_guid[item_detail_visible_div]).prop("disabled", false);
        }

    }
}

function item_detail_next(button) {
    console.log("Button object:", button);
    console.log("Button ID:", button.id);
    var current_item_num = parseInt(button.id);
    console.log("Current item number:", current_item_num);
    var item_count = rendered_call_off.length;
    if (current_item_num >= item_count) {
        current_item_num = 0;
    }
    sc_calloff = rendered_call_off[current_item_num];
    sc_acc_cat = rendered_acc[current_item_num];

    var item_count = $(".hg_class_item_data").length - 1;
    if (item_detail_visible_div == $(".hg_class_item_data").length - 1) {
        item_detail_visible_div = 0;
    } else {
        item_detail_visible_div++;
    }
    console.log("Next item number:", item_detail_visible_div);
    show_item_detail_div();
}

function item_detail_previous(button) {
    console.log("Button object:", button);
    console.log("Button ID:", button.id);
    var current_item_num = parseInt(button.id) - 1;
    console.log("Current item number:", current_item_num);
    var item_count = rendered_call_off.length;
    if (current_item_num == -1) {
        current_item_num = item_count - 1;
    }
    sc_calloff = rendered_call_off[current_item_num]
    if (item_detail_visible_div == 0) {
        item_detail_visible_div = $(".hg_class_item_data").length - 1;
    } else {
        item_detail_visible_div--;
    }
    console.log("Previous item number:", item_detail_visible_div);
    show_item_detail_div();
}

function show_image_div(){
    $(".catalog_img").hide();
    $(".catalog_img:eq(" + image_visible_div + ")").show();

}
<!--  To show Approval tab only if there is Data-->
  $(document).ready(function() {
    // Check if there is data for approval_data.app_id
    var hasData = {% if approval_details %}true{% else %}false{% endif %};

    // Hide or show the tab and list item based on data presence
    if (!hasData) {
        $("#item_approval_process_overview").hide();
        $("#item_approval_overview").hide();
    }
 });
<!--To display Financial Approval in Approval tab-->
 function show_manager_detail1(id) {
        sc_app_guid_data = {};
        sc_app_guid_data['guid'] = id;

        ajax_get_manager_detail(sc_app_guid_data)

        $('#manager_detail_body').empty();
        trHTML = '<tr></tr>';
        $.each(response, function (i, sc_app) {
            trHTML += '<tr><td>' + sc_app.fields.app_desc + '</td><td >' + sc_app.fields.step_num + '</td><td>' + sc_app.fields.proc_lvl_sts + '</td><td>' + sc_app.fields.app_sts + '</td><td>' + sc_app.fields.app_id + '</td><td>' + sc_app.fields.proc_time + '</td><td>' + sc_app.fields.received_time + '</td></tr>';
        });
        $('#manager_detail_body').append(trHTML);
        $('#manager-detail-popup1').modal('show');
 }

function ajax_get_manager_detail(data) {
    urlLink = "{% url 'eProc_Doc_Search:get_sc_app_data' %}";
    AjaxCallAPI(urlLink, data);
}

<!--Function to calculate total sum of items in cart & to display sum in Total Value Card-->
    document.addEventListener("DOMContentLoaded", function () {
        var totalValueSum = 0;
        var totalValueElements = document.querySelectorAll(".total-value");

        totalValueElements.forEach(function (element) {
            var totalValue = parseFloat(element.textContent);
            totalValueSum += totalValue;
        });
         var poValueDescElements = document.querySelectorAll(".po-value-desc");
         poValueDescElements.forEach(function (element) {
           var existingContent = element.textContent.trim();
            if (existingContent !== "") {
                // If the span already contains content, concatenate the total value sum after the existing content
                element.textContent = totalValueSum + " " + existingContent  ;
            } else {
                // If the span is empty, set the total value sum as its content
                element.textContent = totalValueSum ;
            }
         });
    });
</script>
{% endblock %}

